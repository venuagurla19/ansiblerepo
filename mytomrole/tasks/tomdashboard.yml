---
- name: copy tomcat user xml file into node side
  tasks:
    - name: Ensure destination directory exists
      file:
        path: /opt/tomcat/conf
        state: directory

- name: Copy tomcat user xml file
    template:
      src: template/mytomuser.j2
      dest: /opt/tomcat/conf/tomcat-users.xml

- name: copy tomcat context xml file into node side
  template:
    src: template/mytomcontext.j2
    dest: /opt/tomcat/webapps/manager/META-INF/context.xml

- name: copy tomcat host context xml file into node side
  template:
    src: template/mytomhostcontext.j2
    dest: /opt/tomcat/webapps/host-manager/META-INF/context.xml

- name: copy tomcat service xml file into node side
  template:
    src: template/mytomservice.j2
    dest: /etc/systemd/system/tomcat.service
